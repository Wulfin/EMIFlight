<nav>
  <ol class="cd-multi-steps text-bottom count">
    <li class="visited"><a routerLink="/">Recherche</a></li>
    <li *ngIf="returnFlight == undefined" class="visited"><a routerLink="/searchflight/{{this.outboundFlight.flightGeneric.departureAirport.code}}/{{this.outboundFlight.flightGeneric.arrivalAirport.code}}/{{this.outboundFlight.departureDate}}/{{this._class}}/{{this.nbOfPassengersAdults}}/{{this.nbOfPassengersChildren}}/">Vols</a></li>
    <li *ngIf="returnFlight != undefined" class="visited"><a routerLink="/searchflight/{{this.outboundFlight.flightGeneric.departureAirport.code}}/{{this.outboundFlight.flightGeneric.arrivalAirport.code}}/{{this.outboundFlight.departureDate}}/{{this._class}}/{{this.nbOfPassengersAdults}}/{{this.nbOfPassengersChildren}}/{{this.returnFlight.departureDate}}">Vols</a></li>
    <li class="current"><em>Passager</em></li>
    <li><em>Siège</em></li>
  </ol>
</nav>


<div>
  <div style="display: inline-block; width: 50%;">
    <div class="accordion" id="accordionPanelsStayOpenExample" style="width: 800px; margin: 0 auto; margin-top: 25px;">
      <div *ngFor="let adultPassenger of adultPassengers; let i = index" class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse"
                  attr.data-bs-target="#panelsStayOpen-collapseOne{{i}}" aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseOne"
                  style="font-size: 20px;"
                  [ngClass]="{'success-item': !((adultPassenger.passengerCivility.code == undefined || adultPassenger.passengerFirstName == undefined || adultPassenger.passengerLastName == undefined) || (adultPassenger.passengerCivility.code == '' || adultPassenger.passengerFirstName == '' || adultPassenger.passengerLastName == ''))}">
            <i class="fa-solid fa-person fa-2xl"></i>
            <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
            <span *ngIf="adultPassenger.passengerFirstName == undefined || adultPassenger.passengerFirstName == ''">
              Adulte {{i + 1}}
            </span>
            <span *ngIf="(adultPassenger.passengerFirstName != undefined && adultPassenger.passengerFirstName != '') && (adultPassenger.passengerCivility.code != undefined && adultPassenger.passengerCivility.code != '')">
              {{adultPassenger.passengerCivility.code}}&nbsp;
            </span>
            <span *ngIf="adultPassenger.passengerFirstName != undefined && adultPassenger.passengerFirstName != ''">
              {{adultPassenger.passengerFirstName}}
            </span>
            <span *ngIf="(adultPassenger.passengerFirstName != undefined && adultPassenger.passengerFirstName != '') && (adultPassenger.passengerLastName != undefined && adultPassenger.passengerLastName != '')">
              &nbsp;{{adultPassenger.passengerLastName}}
            </span>

            <i *ngIf="!((adultPassenger.passengerCivility.code == undefined || adultPassenger.passengerFirstName == undefined || adultPassenger.passengerLastName == undefined) || (adultPassenger.passengerCivility.code == '' || adultPassenger.passengerFirstName == '' || adultPassenger.passengerLastName == ''))"
               class="fa-regular fa-circle-check fa-xl" style="position: absolute; margin-left: 85%;"></i>
          </button>
        </h2>
        <div attr.id="panelsStayOpen-collapseOne{{i}}" class="accordion-collapse collapse"
             aria-labelledby="panelsStayOpen-headingOne" data-bs-parent="#accordionPanelsStayOpenExample" style="width: 80%; margin: 0 auto; margin-top: 25px;">
          <div style="display: flex; width: 200px">
            <span class="input-group-text" id="basic-addon1">Civilité :</span>
            <select [(ngModel)]="adultPassenger.passengerCivility.code" class="form-select" aria-label="Default select example">
              <option value="Mr">M.</option>
              <option value="Mrs">Mme</option>
              <option value="Miss">Mlle</option>
            </select>
          </div>

          <div class="input-group mb-3" style="margin-top: 10px; display: flex; column-gap: 20%">
            <div style="display: flex; flex-direction: column">
              <span class="input-group-text" id="basic-addon2">Nom de famille: *</span>
              <input [(ngModel)]="adultPassenger.passengerLastName" type="text" class="form-control" placeholder="Écrivez ici..."
                     aria-label="Username">
            </div>
            <div style="display: flex; flex-direction: column;">
              <span class="input-group-text" id="basic-addon3">Prénom: *</span>
              <input [(ngModel)]="adultPassenger.passengerFirstName" type="text" class="form-control" placeholder="Écrivez ici..." aria-label="Server">
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="accordion" id="accordionPanelsStayOpenExamplec" style="width: 800px; margin: 0 auto; margin-top: 25px;">
      <div *ngFor="let childPassenger of childPassengers; let i = index" class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-headingOnec">
          <button class="accordion-button" type="button" data-bs-toggle="collapse"
                  attr.data-bs-target="#panelsStayOpen-collapseOne{{i + 100}}" aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseOne"
                  style="font-size: 20px"
                  [ngClass]="{'success-item': !((childPassenger.passengerCivility.code == undefined || childPassenger.passengerFirstName == undefined || childPassenger.passengerLastName == undefined) || (childPassenger.passengerCivility.code == '' || childPassenger.passengerFirstName == '' || childPassenger.passengerLastName == ''))}">
            <i class="fa-solid fa-child fa-2xl"></i>
            <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
            <span *ngIf="childPassenger.passengerFirstName == undefined || childPassenger.passengerFirstName == ''">
              Enfant {{i + 1}}
            </span>
            <span *ngIf="(childPassenger.passengerFirstName != undefined && childPassenger.passengerFirstName != '') && (childPassenger.passengerCivility.code != undefined && childPassenger.passengerCivility.code != '')">
              {{childPassenger.passengerCivility.code}}&nbsp;
            </span>
            <span *ngIf="childPassenger.passengerFirstName != undefined && childPassenger.passengerFirstName != ''">
              {{childPassenger.passengerFirstName}}
            </span>
            <span *ngIf="(childPassenger.passengerFirstName != undefined && childPassenger.passengerFirstName != '') && (childPassenger.passengerLastName != undefined && childPassenger.passengerLastName != '')">
              &nbsp;{{childPassenger.passengerLastName}}
            </span>

            <i *ngIf="!((childPassenger.passengerCivility.code == undefined || childPassenger.passengerFirstName == undefined || childPassenger.passengerLastName == undefined) || (childPassenger.passengerCivility.code == '' || childPassenger.passengerFirstName == '' || childPassenger.passengerLastName == ''))"
               class="fa-regular fa-circle-check fa-xl" style="position: absolute; margin-left: 85%;"></i>

          </button>
        </h2>
        <div attr.id="panelsStayOpen-collapseOne{{i + 100}}" class="accordion-collapse collapse"
             aria-labelledby="panelsStayOpen-headingOne" data-bs-parent="#accordionPanelsStayOpenExamplec" style="width: 80%; margin: 0 auto; margin-top: 25px;">
          <div style="display: flex; width: 200px">
            <span class="input-group-text" id="basic-addon1c">Civilité : *</span>
            <select [(ngModel)]="childPassenger.passengerCivility.code" class="form-select" aria-label="Default select example">
              <option value="Mr">M.</option>
              <option value="Mrs">Mme</option>
              <option value="Miss">Mlle</option>
            </select>
          </div>

          <div class="input-group mb-3" style="margin-top: 10px; display: flex; column-gap: 20%">
            <div style="display: flex; flex-direction: column">
              <span class="input-group-text" id="basic-addon2c">Nom de famille: *</span>
              <input [(ngModel)]="childPassenger.passengerLastName" type="text" class="form-control" placeholder="Écrivez ici..."
                     aria-label="Username">
            </div>
            <div style="display: flex; flex-direction: column;">
              <span class="input-group-text" id="basic-addon3c">Prénom: *</span>
              <input [(ngModel)]="childPassenger.passengerFirstName" type="text" class="form-control" placeholder="Écrivez ici..." aria-label="Server">
            </div>
          </div>

          <div class="input-group mb-3" style="margin-top: 10px; display: flex; column-gap: 20%">
            <div style="display: flex; flex-direction: column">
              <span class="input-group-text" id="basic-addon4c">Date de naissance: </span>
              <input
                type="date"
                class="form-control"
                id="return-date-input"
                aria-describedby="return-date-label"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div style="display: inline-block; width: 30%; position: absolute; top: 25%; right: 2%;">
    <div class="card border-primary">
      <div class="card-header">
        <h4 class="card-title mb-0">Votre réservation</h4>
      </div>
      <div class="card-body">
        <div class="booking-info">
          <p><strong>Vol:</strong> {{this.outboundFlight.flightGeneric.departureAirport.city}} ({{this.outboundFlight.flightGeneric.departureAirport.code}}) --> {{this.outboundFlight.flightGeneric.arrivalAirport.city}} ({{this.outboundFlight.flightGeneric.arrivalAirport.code}})</p>
          <div>
            <p>
              <strong>Date d'aller :</strong>{{this.outboundFlight.departureDate}}
            </p>
            <p>
              <strong>&nbsp;&nbsp;&nbsp;&nbsp;{{this.outboundFlight.flightGeneric.departureHour.slice(0,5)}}</strong> {{this.outboundFlight.flightGeneric.departureAirport.label}} ({{this.outboundFlight.flightGeneric.departureAirport.code}})
            </p>
            <p>
              <strong>&nbsp;&nbsp;&nbsp;&nbsp;{{this.outboundFlight.flightGeneric.arrivalHour.slice(0,5)}}</strong> {{this.outboundFlight.flightGeneric.arrivalAirport.label}} ({{this.outboundFlight.flightGeneric.arrivalAirport.code}})
            </p>
          </div>

          <div *ngIf="returnFlight != undefined">
            <p><strong>Date de retoure :</strong> {{this.returnFlight.departureDate}}</p>
            <p>
              <strong>&nbsp;&nbsp;&nbsp;&nbsp;{{this.returnFlight.flightGeneric.departureHour.slice(0,5)}}</strong> {{this.returnFlight.flightGeneric.departureAirport.label}} ({{this.returnFlight.flightGeneric.departureAirport.code}})
            </p>
            <p>
              <strong>&nbsp;&nbsp;&nbsp;&nbsp;{{this.returnFlight.flightGeneric.arrivalHour.slice(0,5)}}</strong> {{this.returnFlight.flightGeneric.arrivalAirport.label}} ({{this.returnFlight.flightGeneric.arrivalAirport.code}})
            </p>
          </div>
          <p>
            <strong>
              {{this.nbOfPassengersAdults + this.nbOfPassengersChildren}} Voyageur<strong *ngIf="this.nbOfPassengersAdults + this.nbOfPassengersChildren > 1">s</strong> :
            </strong>
            {{this.nbOfPassengersAdults}} Adulte<span *ngIf="this.nbOfPassengersAdults > 1">s</span>, {{this.nbOfPassengersChildren}} Enfant<span *ngIf="this.nbOfPassengersChildren > 1">s</span>
          </p>
          <p><strong>Classe :</strong> {{this.adultPassengers[0].seatClass.code}}</p>
        </div>
        <div class="price-info">
          <p *ngIf="returnFlight == undefined"><strong>PRIX TOTAL : </strong>{{(this.outboundFlight.flightGeneric.basePrice * this.priceAddition)}},00 MAD</p>
          <p *ngIf="returnFlight != undefined"><strong>PRIX TOTAL : </strong>{{(this.outboundFlight.flightGeneric.basePrice * this.priceAddition) + (this.returnFlight.flightGeneric.basePrice * this.priceAddition)}},00 MAD</p>
        </div>
      </div>
    </div>
  </div>
</div>


<div>
  <button class="btn ml-auto btn-sm" style="display: block; margin: 0 auto; margin-top: 5%"
          (click) = "check(adultPassengers.concat(childPassengers))"
          [ngClass]="{'btn-success': checkker, 'btn-secondary': !checkker}"
  >
    Verifier les donnees
  </button>
</div>


<div class="d-flex alert alert-danger" style="width: 380px; margin: 0 auto; margin-top: 10px" *ngIf="!checkker && clicked" role="alert">
  svp remplir tous les champs puis cliquez sur verifier.
</div>
<div class="d-flex alert alert-success" style="width: 234px; margin: 0 auto; margin-top: 10px" *ngIf="checkker && clicked" role="alert">
  tous les champs sont correct.
</div>

<div class="d-flex" style="margin-right: 25px">
  <button class="btn btn-primary ml-auto btn-lg" style="margin-bottom: 25px;margin-right: 25px; position: fixed; bottom: 0; right: 0"
          [disabled]="!checkker"
          (click) = "check(adultPassengers.concat(childPassengers)); onContinue(adultPassengers.concat(childPassengers).concat(adultPassengersReturn).concat(childPassengersReturn))"
  >
    Continuer
  </button>
</div>
